"use strict";var redipsInit;redipsInit=function(order_type,order_subtype,order_id){var rd=REDIPS.drag,msg;var drag_type="drag_"+order_type+"_"+order_subtype+"s";if(document.getElementById(drag_type)!=null)rd.init(drag_type);rd.hover.colorTr="#FFF4DF";rd.hover.borderTr="2px solid #c0cc7b";rd.rowDropMode="after";rd.event.rowMoved=function(){rd.rowOpacity(rd.obj,30);rd.rowOpacity(rd.objOld,20,"#f1f4e3")};rd.event.rowDroppedBefore=function(sourceTable,sourceRowIndex){var pos=rd.getPosition();var old_index=sourceRowIndex;var new_index=pos[1];var dropok=false;var form=jQuery("#"+rd.obj.id).parents("form:first");var itemtype=null;var itemtype_search=form.children("input[name='itemtype']");var orders_id_search=form.children("input[name='order_id']");if(itemtype_search.length==1)itemtype=itemtype_search.val();if(orders_id_search.length==1)order_id=orders_id_search.val();if(typeof order_id==="undefined"||typeof itemtype==="undefined"){return false}jQuery.ajax({url:"../ajax/deploypackage_form.php",method:"POST",async:false,dataType:"json",data:{move_item:true,old_index:old_index,new_index:new_index,itemtype:itemtype,id:order_id},success:function(result,request){dropok=result["success"];var els=jQuery("#package_order_"+order_id+" #package_json_debug");if(els.length>0){if(els.length==1){els.first().load("../ajax/deploypackage_form.php",{id:orders_id,subtype:"package_json_debug"})}else{console.log("too much #package_json_debug elements (count="+els.getCount()+")")}}},error:function(result,request){console.log("Ajax.error : "+result.responseText);dropok=false}});if(!dropok)rd.rowOpacity(rd.objOld,100);return dropok};rd.event.rowDropped=function(targetRow,sourceTable,sourceRowIndex){};rd.event.rowDroppedSource=function(){rd.rowOpacity(rd.objOld,100)}};